{% extends "chat/base.html" %}

{% load static %}
{% block title %}Change Password{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/forms.css' %}">
{% endblock %}

{% block main_class %}
auth-page-wrapper
{% endblock %}

{% block content %}
<div class="auth-header">
    <a href="{% url 'account' %}" class="header-btn back-button" title="Back to Account"><i class="fas fa-arrow-left"></i></a>
    <button type="button" id="theme-toggler" class="header-btn theme-toggler-btn">ðŸŒ™</button>
    <button class="header-btn help-button" id="help-btn" title="Password Help"><i class="fas fa-question-circle"></i></button>
</div>

<div class="form-container">
    <form method="post" class="auth-form">
        <h2>Change Password</h2>
        {% csrf_token %}
        
        {% if form.non_field_errors %}
            <div class="form-errors">
                {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}

        <p>{{ form.old_password.label_tag }} {{ form.old_password }}</p>
        {% if form.old_password.errors %}<div class="field-error">{{ form.old_password.errors.as_text }}</div>{% endif %}

        <p>{{ form.new_password1.label_tag }} {{ form.new_password1 }}</p>
        {% if form.new_password1.errors %}<div class="field-error">{{ form.new_password1.errors.as_text }}</div>{% endif %}

        <p>{{ form.new_password2.label_tag }} {{ form.new_password2 }}</p>
        {% if form.new_password2.errors %}<div class="field-error">{{ form.new_password2.errors.as_text }}</div>{% endif %}

        <button type="submit">Change Password</button>
    </form>
</div>

<!-- Help Modal -->
<div class="help-modal-overlay" id="help-modal-overlay">
    <div class="help-modal-content">
        <span class="close-modal" id="close-modal">&times;</span>
        <h3>Password Requirements</h3>
        <ul>
            <li>Your password canâ€™t be too similar to your other personal information.</li>
            <li>Your password must contain at least 8 characters.</li>
            <li>Your password canâ€™t be a commonly used password.</li>
            <li>Your password canâ€™t be entirely numeric.</li>
        </ul>
    </div>
</div>

{% endblock %}